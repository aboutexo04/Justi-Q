# 형사법 RAG 데이터 분석 (EDA)

## 1. 데이터 개요

형사법 기반 RAG 시스템 구축을 위한 데이터 분석 결과입니다.

### 1.1 폴더 구조

```
data/
├── Training/
│   ├── 1_source_data/          # 원본 데이터 (RAG 임베딩용)
│   │   ├── TS_judgement/       # 판례
│   │   ├── TS_decision/        # 결정문
│   │   ├── TS_statute/         # 법령
│   │   └── TS_interpretation/  # 해석
│   └── 2_labeled_data/         # 라벨링 데이터 (평가용)
│       ├── TL_judgement_QA/    # 판례 Q&A
│       ├── TL_judgement_SUM/   # 판례 요약
│       └── ...
└── Validation/
    ├── 1_source_data/
    └── 2_labeled_data/
```

---

## 2. 전체 데이터 현황

### 2.1 소스 데이터 (1_source_data)

| 유형 | Training | Validation | 총합 | 비율 |
|------|----------|------------|------|------|
| 판례 (judgement) | 32,525 | 4,066 | **36,591** | 79.8% |
| 결정문 (decision) | 7,409 | 926 | **8,335** | 18.2% |
| 법령 (statute) | 798 | 100 | **898** | 2.0% |
| 해석 (interpretation) | 50 | 8 | **58** | 0.1% |
| **합계** | **40,782** | **5,100** | **45,882** | 100% |

### 2.2 Labeled 데이터 (2_labeled_data)

| 유형 | Training | 설명 |
|------|----------|------|
| TL_statute_QA | 34,919 | 법령 Q&A |
| TL_judgement_SUM | 27,633 | 판례 요약 |
| TL_judgement_QA | 7,025 | 판례 Q&A |
| TL_decision_QA | 5,426 | 결정문 Q&A |
| TL_decision_SUM | 4,890 | 결정문 요약 |
| TL_interpretation_QA | 64 | 해석 Q&A |
| TL_interpretation_SUM | 43 | 해석 요약 |
| **총합** | **~80,000** | |

### 2.3 데이터 역할

| 데이터 종류 | 용도 | 설명 |
|-------------|------|------|
| **소스 데이터** (TS_*, VS_*) | RAG 벡터 DB 구축 | 검색 대상 문서 |
| **Q&A 데이터** (TL_*_QA) | 평가용 | 질문-정답 쌍으로 RAG 검색/답변 품질 측정 |
| **요약 데이터** (TL_*_SUM) | 평가용 | 요약 생성 품질 평가 |

### 2.4 Labeled 데이터 형식

**Q&A 데이터 예시** (`TL_judgement_QA/*.json`)
```json
{
  "label": {
    "input": "피고인의 업무상 과실치사죄에 대해 원심판결이 파기된 이유는?",
    "output": "피고인에게 적용된 과실의 내용이 명확히 밝혀지지 않았기 때문..."
  }
}
```

**요약 데이터 예시** (`TL_judgement_SUM/*.json`)
```json
{
  "label": {
    "instruction": "'주문'의 내용을 포함하여 30어절 이상의 서술형으로 요약하시오.",
    "output": "성애가 낀 상태의 차량을 운전하면서 피고인은 시속 20킬로미터로..."
  }
}
```

---

## 3. 데이터 형식

### 3.1 소스 데이터 (CSV)

**예시: 판례 데이터** (`TS_judgement/HS_P_100029.csv`)

| 컬럼 | 설명 | 예시 |
|------|------|------|
| 판례일련번호 | 고유 ID | 100029 |
| 구분 | 섹션 유형 | 판시사항, 판결요지, 참조조문, 판례내용 |
| 문장번호 | 순서 | 1, 2, 3, ... |
| 내용 | 본문 텍스트 | "업무상 과실치사죄로 의율하면서..." |

### 3.2 Q&A 데이터 (JSON)

**예시: 판례 Q&A** (`TL_judgement_QA/HS_P_100029_QA_3854.json`)

```json
{
  "info": {
    "precedId": "100029",
    "caseName": "특정범죄가중처벌등에관한법률위반·교통사고처리특례법위반",
    "caseNum": "84도2229",
    "sentenceDate": "1984.12.26",
    "courtName": "대법원"
  },
  "label": {
    "input": "피고인의 업무상 과실치사죄에 대해 원심판결이 파기된 이유는 무엇인가요?",
    "output": "피고인의 업무상 과실치사죄에 대한 원심판결이 파기된 이유는..."
  }
}
```

---

## 4. 샘플링 전략

### 4.1 MVP 구축용 샘플링 (2,000개)

법률 조언 RAG 시스템 특성상, **법령과 해석은 전체 포함**하고 판례/결정문은 샘플링.

| 유형 | 샘플 수 | 비고 |
|------|---------|------|
| 법령 | 898 (전체) | 법적 근거 누락 방지 |
| 해석 | 58 (전체) | 전체 포함 |
| 판례 | 750 | 랜덤 샘플링 |
| 결정문 | 294 | 랜덤 샘플링 |
| **총합** | **2,000개** | |

### 4.2 샘플링 이유

- **법령 전체 포함**: 법률 조언의 법적 근거가 되므로 누락 시 답변 품질 저하
- **판례/결정문 샘플링**: 수량이 많고, MVP 단계에서는 대표 사례로 충분

### 4.3 샘플 데이터 위치

```
data_sampled/
├── judgement/      (750개)
├── decision/       (294개)
├── statute/        (898개)
└── interpretation/ (58개)
```

---

## 5. 다음 단계

1. **임베딩 모델 선정**: 한국어 법률 도메인에 적합한 모델 선택
2. **벡터 DB 구축**: 샘플 데이터 인덱싱
3. **검색 파이프라인**: 쿼리 → 검색 → 답변 생성
4. **평가**: Q&A 데이터로 검색/답변 품질 측정

---

## 6. 참고

- 샘플링 스크립트: `scripts/sample_data.py`
- 랜덤 시드: 42 (재현 가능)
- 분석 일자: 2025-01-05
